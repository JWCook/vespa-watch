{% extends 'vespawatch/base.html' %}
{% load static %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block content %}
<main class="container">
  <div class="row justify-content-lg-center">
    <div class="col-lg-6 col-lg-auto">
      <h1>{% trans 'Change password' %}</h1>

      {% if form.errors %}
        {% for field in form %}
          {% for error in field.errors %}
            <div class="alert alert-danger" role="alert">{{ field.label }}: {{ error|escape }}</div>
          {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
          <div class="alert alert-danger" role="alert">{{ error|escape }}</div>
        {% endfor %}
      {% endif %}

      <form method="post">
        {% csrf_token %}
        
        <p>{% trans "Please enter your old password, for security's sake, and then enter your new password twice so we can verify you typed it in correctly." %}</p>

        <div class="form-group">
          {{ form.old_password.label_tag }}
          {{ form.old_password }}
        </div>

        <div class="form-group">
          {{ form.new_password1.label_tag }}
          {{ form.new_password1 }}
          <small>{{ form.new_password1.help_text|safe }}</small>
        </div>

        <div class="form-group">
          {{ form.new_password2.label_tag }}
          {{ form.new_password2 }}
        </div>

        <input type="submit" value="{% trans 'Change my password' %}" class="btn btn-primary">
        <a class="btn btn-light" href="{% url 'vespawatch:profile' %}">{% trans 'Cancel' %}</a>
      </form>
    </div>
  </div>
</main>
{% endblock %}
